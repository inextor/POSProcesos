<form (submit)="saveShipping($event)" ngNativeValidate>
	<div class="container-fluid">
		<div class="card p-3 mt-3">
			<div *ngIf="crequisition_info">
				<div class="row">
					<div class="col-3 form-group">
						<label>GUIA</label>
						<input type="text" name="shipping_guide" [(ngModel)]="shipping_guide" class="form-control" required>
					</div>
					<div class="col-3">
						<label>Compañia</label>
						<input type="text" name="shipping_company" [(ngModel)]="shipping_company" class="form-control">
					</div>
					<div class="col-6">
						<label>Fecha de Envío</label>
						<input type="date" name="shipping_date" [(ngModel)]="shipping_date" class="form-control" required>
					</div>
				</div>
				<div class="row">
					<div class="col-3 form-group">
						<label class="">Sucursal Origen</label>
						<input name="shipping_from_store" [value]="shipping_from_store?.name" class="form-control" disabled>
					</div>
					<div class="col-3 form-group">
						<label class="">Sucursal Destino</label>
						<input name="shipping_to_store" [value]="shipping_to_store?.name" class="form-control" disabled>
					</div>
				</div>
				<table class="w-100 mx-0">
					<thead class="thead-light">
						<tr>
							<th>Artículo</th>
							<th class="text-end">Requeridos</th>
							<th class="text-end">Producidos</th>
							<th class="text-end">Acciones</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let cri of crequisition_info.citems">
							<td class="border">{{cri.item.id}} - {{cri?.category?.name??''}} {{cri.item.name }}</td>
							<td class="text-end border">{{cri.required}}</td>
							<td class="text-end border">{{cri.shipped | number}}</td>
							<td class="text-end border">
								<button type="button" (click)="cri.to_ship_qty = (cri.required-cri.shipped)" class="btn btn-primary">
									<b>+</b>
									{{cri.required - cri.shipped | number}}
								</button>
							</td>
							<td class="text-end border">
								<input type="number" class="form-control text-end" name="'item-'+cri.item.id" [(ngModel)]="cri.to_ship_qty">
							</td>
							<!--td class="text-end">{{(cri.production?.production_merma_qty || 0) | number}}</td-->
						</tr>
					</tbody>
				</table>
				<div class="py-3 text-end">
					<button type="submit" [disabled]="is_loading" class="btn btn-primary">Crear</button>
				</div>
			</div>
		</div>
	</div>
</form>
